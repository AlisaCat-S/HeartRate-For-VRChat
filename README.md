# HeartRate for VRChat

这是一个通过蓝牙LE (Bluetooth Low Energy) 心率设备（如智能手环、手表）捕获实时心率，并通过 OSC (Open Sound Control) 协议将其发送到 VRChat 的工具。它还支持将心率数据实时写入本地文件，以便与其他软件（如直播推流工具 OBS）集成。

## ✨ 主要功能

-   **心率获取**：将心率数据发送到 VRChat，驱动 avatar 的心率动画或参数。
-   **选择设备**：
    -   启动时自动扫描并连接到附近的目标心率设备。
    -   支持两种连接模式：**信号最强**（默认）或**按名称匹配**。
    -   内置心跳超时检测，当设备关机或断开连接时，程序会自动进入重新扫描和连接流程。
-   **状态判断**：当检测到心率值为 `0` 时，会自动将其视为“未佩戴”状态，并向 VRChat 发送 `false` 的连接状态，使 avatar 能够表现出对应的状态。
-   **文本文件输出**：将当前心率值实时写入程序目录下的 `HeartRate.txt` 文件中。这使得其他软件可以轻松读取该文件，实现更多联动，例如在直播画面上显示心率。

## ⚙️ 支持的设备

已测试以下名称的设备：

-   Xiaomi Smart Band 9
-   Xiaomi Smart Band 10
-   HUAWEI (华为手环/手表)
-   HONOR (荣耀手环/手表)

理论上，任何遵循标准蓝牙 GATT 心率服务规范 (`0x180D`) 的设备都可以被支持。

## 🚀 如何使用

1.  从本项目的 **Releases** 页面下载最新的可执行文件。
2.  确保您的电脑已开启蓝牙功能。
3.  开启您的心率监测设备或功能，并确保它没有被其他设备 (`Pulsoid/码表`) 连接
4.  执行下载的 `.exe` 文件。
5.  程序将开始扫描设备。成功连接后，您会在终端窗口中看到实时的心率数据。
6.  检查 VRChat，并确保已在 **菜单** 中启用了 OSC，并且 Avatar 支持心率显示功能。

## ⚙️ 已经测试过的的预制件
-   适配预制件1：https://booth.pm/ja/items/6224828
-   适配预制件2：https://booth.pm/ja/items/7197938

## 致谢
 
本项目的蓝牙心率读取功能，主要受到了 Tnze 开发的 [miband-heart-rate](https://github.com/Tnze/miband-heart-rate) 项目的启发，以及 西時流Behemoth 的帮助~

